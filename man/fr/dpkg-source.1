.\" Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "dpkg-source 1"
.TH dpkg-source 1 "2020-08-02" "1.20.5" "dpkg suite"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NOM"
.IX Header "NOM"
dpkg-source \- Outil de manipulation des paquets sources Debian (.dsc).
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBdpkg-source\fR [\fIoption\fR...] \fIcommande\fR
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBdpkg-source\fR empaquette ou d\('epaquette une archive source Debian.
.PP
Aucune de ces commandes ne permet la combinaison de plusieurs options en une
seule et elles ne permettent pas d'indiquer la valeur d'une option dans un
argument s\('epar\('e.
.SH "COMMANDES"
.IX Header "COMMANDES"
.IP "\fB\-x\fR , \fB\-\-extract\fR \fInom-de-fichier\fR.dsc [\fIr\('epertoire\-de\-sortie\fR]" 4
.IX Item "-x , --extract nom-de-fichier.dsc [r\('epertoire-de-sortie]"
Cette option sert \(`a extraire un paquet source (\fB\-\-extract\fR depuis
dpkg 1.17.14). Un seul argument sans option doit \(^etre donn\('e : le nom du
fichier de contr\(^ole des sources Debian (\fB.dsc\fR). Un deuxi\(`eme argument sans
option peut \('egalement \(^etre donn\('e pour indiquer le r\('epertoire o\(`u extraire le
paquet source : ce r\('epertoire ne doit pas d\('ej\(`a exister. Quand aucun
r\('epertoire n'est indiqu\('e, le paquet source est extrait dans un r\('epertoire
\&\fIsource\fR\-\fIversion\fR du r\('epertoire courant.
.Sp
\&\fBdpkg-source\fR lit, dans le fichier de contr\(^ole, les noms des fichiers qui
composent le paquet source ; il suppose qu'ils sont dans le m\(^eme r\('epertoire
que le fichier \fB.dsc\fR.
.Sp
Les fichiers extraits du paquet auront leurs propri\('etaires et permissions
d\('efinis \(`a ceux attendus s'ils avaient \('et\('e simplement cr\('e\('es. Les r\('epertoires
et les fichiers ex\('ecutables auront une permission \('egale \(`a 0777 et les
simples fichiers \(`a 0666, les deux \('etant modifi\('ees par le masque (umask) de
celui qui fait l'extraction. Si le r\('epertoire parent est \(Fo setgid \(Fc, les
r\('epertoires extraits le seront aussi et tous les fichiers et r\('epertoires
h\('eriteront de sa propri\('et\('e de groupe.
.Sp
Si le paquet source utilise un format non standard (actuellement, cela
signifie tous les formats sauf le \(Fo 1.0 \(Fc), son nom sera enregistr\('e dans
\&\fBdebian/source/format\fR de sorte que la construction du paquet source
utilise le m\(^eme format par d\('efaut.
.IP "\fB\-b\fR, \fB\-\-build\fR \fIr\('epertoire\fR [\fIparam\(`etres\-dans\-un\-format\-sp\('ecifique\fR]" 4
.IX Item "-b, --build r\('epertoire [param\(`etres-dans-un-format-sp\('ecifique]"
Construit un paquet source (\fB\-\-build\fR depuis dpkg 1.17.14). Le premier
argument sans option est pris comme nom du r\('epertoire contenant
l'arborescence des sources debianis\('ee (c'est\-\(`a\-dire avec un sous\-r\('epertoire
debian et peut\-\(^etre des modifications sur les fichiers d'origine). Selon le
format du paquet source utilis\('e pour construire le paquet, d'autres
param\(`etres peuvent \(^etre accept\('es.
.Sp
\&\fBdpkg-source\fR va construire le paquet source dans le premier format trouv\('e
dans la liste suivante : le(s) format(s) indiqu\('e(s) avec le param\(`etre de la
ligne de commande \fI\-\-format\fR, le format indiqu\('e dans
\&\fBdebian/source/format\fR, \(Fo 1.0 \(Fc. L'utilisation de \(Fo 1.0 \(Fc comme dernier
recours est obsol\(`ete et sera retir\('ee dans le futur. Le format source devrait
toujours \(^etre indiqu\('e dans \fBdebian/source/format\fR. Voir la section
\&\fB\s-1FORMATS DE PAQUET SOURCE\s0\fR pour une description plus d\('etaill\('ee des
diff\('erents formats de paquet source.
.IP "\fB\-\-print\-format\fR \fIr\('epertoire\fR" 4
.IX Item "--print-format r\('epertoire"
Affiche le format source qui serait utilis\('e pour construire le paquet source
si \fBdpkg-source \-\-build\fR \fIr\('epertoire\fR \('etait utilis\('e (dans les m\(^emes
conditions et avec les m\(^emes options ; depuis dpkg 1.15.5).
.IP "\fB\-\-before\-build\fR \fIr\('epertoire\fR" 4
.IX Item "--before-build r\('epertoire"
Ex\('ecute le point d'entr\('ee correspondant du format de paquet source (depuis
dpkg 1.15.8). Ce point d'entr\('ee doit \(^etre utilis\('e avant toute construction
du paquet (\fBdpkg-buildpackage\fR l'utilise tr\(`es t\(^ot, avant m\(^eme
\&\fBdebian/rules clean\fR). Cette commande est idempotente et peut \(^etre lanc\('ee
plusieurs fois. Tous les formats source ne mettent pas en \(oeuvre ce
branchement et ceux qui le font pr\('eparent l'arborescence source pour la
construction, par exemple en garantissant que les correctifs Debian sont
appliqu\('es.
.IP "\fB\-\-after\-build\fR \fIr\('epertoire\fR" 4
.IX Item "--after-build r\('epertoire"
Ex\('ecute le point d'entr\('ee correspondant du format de paquet source (depuis
dpkg 1.15.8). Ce point d'entr\('ee doit \(^etre utilis\('e apr\(`es toute construction
du paquet (\fBdpkg-buildpackage\fR l'utilise en dernier). Cette commande est
idempotente et peut \(^etre lanc\('ee plusieurs fois. Tous les formats source ne
mettent pas en \(oeuvre ce branchement et ceux qui le font s'en servent pour
d\('efaire ce qui a \('et\('e fait par \fB\-\-before\-build\fR.
.IP "\fB\-\-commit\fR [\fIr\('epertoire\fR] ..." 4
.IX Item "--commit [r\('epertoire] ..."
Enregistre les modifications dans l'arborescence source d\('ecompress\('ee dans
\&\fIr\('epertoire\fR (depuis dpkg 1.16.1). Cette commande peut accepter des
param\(`etres suppl\('ementaires selon le format source. Elle provoquera une
erreur pour les formats o\(`u cette op\('eration n'a pas de signification.
.IP "\fB\-?\fR, \fB\-\-help\fR" 4
.IX Item "-?, --help"
Affiche un message d'aide puis quitte. Les options de construction et
d'extraction sp\('ecifiques au format peuvent \(^etre montr\('ees avec l'option
\&\fB\-\-format\fR.
.IP "\fB\-\-version\fR" 4
.IX Item "--version"
Affiche le num\('ero de version puis quitte.
.SH "OPTIONS"
.IX Header "OPTIONS"
.SS "Options de construction g\('en\('erique"
.IX Subsection "Options de construction g\('en\('erique"
.IP "\fB\-c\fR\fIfichier\-de\-contr\(^ole\fR" 4
.IX Item "-cfichier-de-contr\(^ole"
Indique le principal fichier de contr\(^ole des sources o\(`u trouver les
renseignements. Par d\('efaut, c'est le fichier \fBdebian/control\fR. Lorsqu'un
chemin relatif est fourni, on consid\(`ere qu'il est relatif au r\('epertoire le
plus \('elev\('e de l'arborescence source.
.IP "\fB\-l\fR\fIfichier-des-changements\fR" 4
.IX Item "-lfichier-des-changements"
Indique le journal des modifications o\(`u trouver des renseignements. Par
d\('efaut, c'est le fichier \fBdebian/changelog\fR. Lorsqu'un chemin relatif est
fourni, on consid\(`ere qu'il est relatif au r\('epertoire le plus \('elev\('e de
l'arborescence source.
.IP "\fB\-F\fR\fIformat-du-fichier-des-changements\fR" 4
.IX Item "-Fformat-du-fichier-des-changements"
Indique le format du fichier des changements. Voir \fBdpkg-parsechangelog\fR(1)
pour plus d'informations \(`a propos des formats g\('er\('es.
.IP "\fB\-\-format=\fR\fIvaleur\fR" 4
.IX Item "--format=valeur"
Utilise le format indiqu\('e pour la construction du paquet source (depuis
dpkg 1.14.17). Ce choix remplace le format indiqu\('e dans
\&\fBdebian/source/format\fR.
.IP "\fB\-V\fR\fInom\fR\fB=\fR\fIvaleur\fR" 4
.IX Item "-Vnom=valeur"
Fixe la valeur d'une variable de substitution. Consultez \fBdeb-substvars\fR(5)
pour une discussion sur la valeur de substitution.
.IP "\fB\-T\fR\fIfichier-substvars\fR" 4
.IX Item "-Tfichier-substvars"
Lit les variables de substitution dans \fIfichier-substvars\fR ; par d\('efaut
aucun fichier n'est lu. Cette option peut \(^etre utilis\('ee plusieurs fois pour
lire des variables de substitution depuis plusieurs fichiers (depuis
dpkg 1.15.6).
.IP "\fB\-D\fR\fIchamp\fR\fB=\fR\fIvaleur\fR" 4
.IX Item "-Dchamp=valeur"
Remplace ou ajoute en sortie un champ dans le fichier de contr\(^ole.
.IP "\fB\-U\fR\fIchamp\fR" 4
.IX Item "-Uchamp"
Supprime en sortie un champ dans le fichier de contr\(^ole.
.IP "\fB\-Z\fR\fIcompression\fR, \fB\-\-compression\fR=\fIcompression\fR" 4
.IX Item "-Zcompression, --compression=compression"
Sp\('ecifie le niveau de compression \(`a utiliser pour les fichiers archive et
diff cr\('e\('es (\fB\-\-compression\fR depuis dpkg 1.15.5). Notez que cette option ne
causera pas la recompression des archives existantes, cela ne concerne que
les nouveaux fichiers. Les valeurs accept\('ees sont les suivantes : \fIgzip\fR,
\&\fIbzip2\fR, \fIlzma\fR et \fIxz\fR. L'option par d\('efaut est \fIxz\fR pour les
formats 2.0 et plus r\('ecents, et \fIgzip\fR pour le format 1.0. \fIxz\fR n'est g\('er\('e
que depuis dpkg 1.15.5.
.IP "\fB\-z\fR\fIniveau\fR, \fB\-\-compression\-level\fR=\fIniveau\fR" 4
.IX Item "-zniveau, --compression-level=niveau"
Niveau de compression \(`a utiliser (\fB\-\-compression\-level\fR depuis
dpkg 1.15.5). Comme avec \fB\-Z\fR cela ne concerne que les fichiers
nouvellement cr\('e\('es. Les valeurs prises possibles sont les suivantes : \fI1\fR \(`a
\&\fI9\fR, \fIbest\fR et \fIfast\fR. La valeur par d\('efaut est \fI9\fR pour gzip et bzip2,
\&\fI6\fR pour xz et lzma.
.IP "\fB\-i\fR[\fIexpression-rationnelle\fR], \fB\-\-diff\-ignore\fR[=\fIexpression-rationnelle\fR]" 4
.IX Item "-i[expression-rationnelle], --diff-ignore[=expression-rationnelle]"
Il est possible de donner une expression rationnelle Perl pour filtrer les
fichiers qui doivent \(^etre \('elimin\('es de la liste des fichiers pour le \(Fo diff \(Fc
(\fB\-\-diff\-ignore\fR depuis dpkg 1.15.6). Cette liste est cr\('e\('ee avec une
commande \(Fo find \(Fc. Si le fichier source en construction est un fichier
source de version 3 utilisant un syst\(`eme de suivi de versions, cette option
est utile pour ignorer les modifications non envoy\('ees. Utiliser \fB\-i\fR\fI.*\fR
les ignorera toutes.
.Sp
L'option \fB\-i\fR active cette fonction avec une expression rationnelle par
d\('efaut (en pr\('eservant toutes les modifications faites avec l'expression
rationnelle par d\('efaut par une utilisation pr\('ec\('edente de
\&\fB\-\-extend\-diff\-ignore\fR) qui couvre les fichiers de contr\(^ole des plus usuels
syst\(`emes de gestion de version, les fichiers de sauvegarde, les fichiers
d'\('echange et les r\('epertoires utilis\('es par Libtool. Il ne peut y avoir qu'une
seule expression rationnelle active ; avec de multiples options \fB\-i\fR, seule
la derni\(`ere mentionn\('ee sera prise en compte.
.Sp
C'est tr\(`es utile pour supprimer des fichiers qui sont inclus dans le diff,
par exemple, si vous maintenez un source avec un syst\(`eme de contr\(^ole de
version et que voulez construire un paquet source sans inclure des fichiers
et r\('epertoires additionnels qu'il contient g\('en\('eralement (par exemple \s-1CVS/,\s0
\&.cvsignore, .svn/). L'expression rationnelle par d\('efaut est d\('ej\(`a tr\(`es
exhaustive, mais si avez besoin de la remplacer, veuillez noter que par
d\('efaut, il sait v\('erifier n'importe quelle partie d'un chemin, donc si vous
voulez trouver le d\('ebut d'un nom de fichier ou des noms de fichiers
complets, vous devrez fournir les caract\(`eres sp\('eciaux vous\-m\(^eme (par exemple
\(Fo (^|/) \(Fc, \(Fo ($|/) \(Fc).
.IP "\fB\-\-extend\-diff\-ignore\fR=\fIexpression-rationnelle\fR" 4
.IX Item "--extend-diff-ignore=expression-rationnelle"
L'expression rationnelle Perl indiqu\('ee compl\('etera la valeur par d\('efaut
utilis\('ee par \fB\-\-diff\-ignore\fR et sa valeur courante si elle est d\('efinie
(depuis dpkg 1.15.6). Cela est effectu\('e en concat\('enant
\(Fo \fB|\fR\fIexpression-rationnelle\fR \(Fc \(`a la valeur existante. Cette option est
pratique dans \fBdebian/source/options\fR pour exclure certains fichiers
auto\-cr\('e\('es de la cr\('eation automatique de correctifs.
.IP "\fB\-I\fR[\fImotif-fichier\fR], \fB\-\-tar\-ignore\fR[=\fImotif-fichier\fR]" 4
.IX Item "-I[motif-fichier], --tar-ignore[=motif-fichier]"
Avec cette option, le fichier est pass\('e \(`a l'option \fB\-\-exclude\fR de \fBtar\fR(1)
quand on veut cr\('eer un fichier .orig.tar ou .tar (\fB\-\-tar\-ignore\fR depuis
dpkg 1.15.6). Par exemple, \fB\-I\fR\s-1CVS\s0 fera que tar sautera les r\('epertoires du
\&\s-1CVS\s0 quand il doit cr\('eer un fichier .tar.gz. On peut r\('ep\('eter cette option
pour exclure \(`a partir de plusieurs motifs.
.Sp
\&\fB\-I\fR ajoute par d\('efaut des options \fB\-\-exclude\fR qui \('elimineront les
fichiers et les r\('epertoires de contr\(^oles des syst\(`emes les plus connus de
contr\(^ole de version, les fichiers d'\('echange et de sauvegarde et les
r\('epertoires utilis\('es par Libtool.
.PP
\&\fBNote\fR : m\(^eme si elles ont des r\(^oles similaires, \fB\-i\fR et \fB\-I\fR ont une
syntaxe et une s\('emantique tr\(`es diff\('erentes. \fB\-i\fR ne peut \(^etre sp\('ecifi\('e
qu'une fois et re\(,coit une expression rationnelle compatible avec le langage
Perl qui est appliqu\('ee sur chaque chemin relatif complet de chaque
fichier. \fB\-I\fR peut \(^etre sp\('ecifi\('e plusieurs fois et prend un motif de nom de
fichier avec les m\('eta\-caract\(`eres du shell. Le motif est appliqu\('e au chemin
relatif complet mais aussi \(`a chaque partie du chemin individuellement. La
s\('emantique exacte de l'option \fB\-\-exclude\fR de tar est un peu compliqu\('ee,
voir https://www.gnu.org/software/tar/manuel/tar.html#wildcards pour une
documentation plus compl\(`ete.
.PP
L'expression rationnelle et le motif par d\('efaut pour les deux options
peuvent \(^etre trouv\('es dans la sortie de la commande \fB\-\-help\fR.
.SS "Options d'extraction g\('en\('eriques"
.IX Subsection "Options d'extraction g\('en\('eriques"
.IP "\fB\-\-no\-copy\fR" 4
.IX Item "--no-copy"
Ne copie pas l'archive d'origine \(`a c\(^ot\('e de l'extraction du paquet source
(depuis dpkg 1.14.17).
.IP "\fB\-\-no\-check\fR" 4
.IX Item "--no-check"
Ne v\('erifie pas les signatures et les sommes de contr\(^ole avant de
d\('epaqueter(depuis dpkg 1.14.17).
.IP "\fB\-\-no\-overwrite\-dir\fR" 4
.IX Item "--no-overwrite-dir"
Ne pas remplacer le r\('epertoire d'extraction s'il existe d\('ej\(`a (depuis
dpkg 1.18.8)
.IP "\fB\-\-require\-valid\-signature\fR" 4
.IX Item "--require-valid-signature"
Refuse to unpack the source package if it doesn't contain an OpenPGP
signature that can be verified (since dpkg 1.15.0) either with the user's
\&\fItrustedkeys.gpg\fR keyring, one of the vendor-specific keyrings, or one of
the official Debian keyrings (\fI/usr/share/keyrings/debian\-keyring.gpg\fR,
\&\fI/usr/share/keyrings/debian\-nonupload.gpg\fR and
\&\fI/usr/share/keyrings/debian\-maintainers.gpg\fR).
.IP "\fB\-\-require\-strong\-checksums\fR" 4
.IX Item "--require-strong-checksums"
Refuse de d\('ecompresser le paquet source s'il ne contient pas de somme de
contr\(^ole robuste (depuis dpkg 1.18.7). Actuellement, \fB\s-1SHA\-256\s0\fR est le seul
type de somme de contr\(^ole consid\('er\('e comme robuste.
.IP "\fB\-\-ignore\-bad\-version\fR" 4
.IX Item "--ignore-bad-version"
Transforme la v\('erification des mauvaises versions des paquets source en
avertissement non fatal (since dpkg 1.17.7). Cette option sera seulement
n\('ecessaire quand on extrait des anciens paquets source avec des versions
cass\('ees, pour pr\('eserver la compatibilit\('e avec les versions pr\('ec\('edentes.
.SH "FORMATS DE PAQUET SOURCE"
.IX Header "FORMATS DE PAQUET SOURCE"
Si vous ne savez pas quel format source utiliser, il est conseill\('e de
choisir soit \(Fo 3.0 (quilt) \(Fc soit \(Fo 3.0 (native) \(Fc. Voir
https://wiki.debian.org/Projects/DebSrc3.0 pour plus d'informations sur la
mise en \(oeuvre de ces formats dans Debian.
.SS "Format : 1.0"
.IX Subsection "Format : 1.0"
Un paquet source dans ce format se compose soit d'un \fB.orig.tar.gz\fR associ\('e
\(`a un \fB.diff.gz\fR ou un simple \fB.tar.gz\fR (dans ce cas, le paquet est appel\('e
natif \fInative\fR). L'archive tar originale pourrait \(^etre accompagn\('ee de fa\(,con
facultative d'une signature amont s\('epar\('ee \fB.orig.tar.gz.asc\fR, extraction
prise en charge depuis dpkg 1.18.5.
.PP
\&\fBExtraction\fR
.PP
Extracting a native package is a simple extraction of the single tarball in
the target directory. Extracting a non-native package is done by first
unpacking the \fB.orig.tar.gz\fR and then applying the patch contained in the
\&\fB.diff.gz\fR file. The timestamp of all patched files is reset to the
extraction time of the source package (this avoids timestamp skews leading
to problems when autogenerated files are patched). The diff can create new
files (the whole debian directory is created that way) but cannot remove
files (empty files will be left over) and cannot create or change symlinks.
.PP
\&\fBConstruction\fR
.PP
Construire un paquet natif revient simplement \(`a cr\('eer une archive tar avec
le r\('epertoire du source. La cr\('eation d'un paquet non natif consiste \(`a
extraire l'archive d'origine dans un r\('epertoire s\('epar\('e \(Fo .orig \(Fc puis \(`a
r\('eg\('en\('erer le \fB.diff.gz\fR en comparant le \fIr\('epertoire\fR du paquet source avec
le r\('epertoire \(Fo .orig \(Fc.
.PP
\&\fBOptions de construction (avec \-\-build) :\fR
.PP
Si l'on donne un second argument, ce sera le nom du r\('epertoire source
d'origine ou le nom du fichier tar ou bien une cha\(^ine vide si le paquet est
un \(Fo Debian pure souche \(Fc et n'a donc pas de fichiers \(Fo diffs \(Fc pour sa
\(Fo debianisation \(Fc. S'il n'y a pas de second argument, \fBdpkg-source\fR cherche
le fichier tar des sources d'origine
\&\fIpaquet\fR\fB_\fR\fIversion-amont\fR\fB.orig.tar.gz\fR ou bien le r\('epertoire source
d'origine \fIr\('epertoire\fR\fB.orig\fR selon les param\(`etres \fB\-sX\fR.
.PP
Les options \fB\-sa\fR, \fB\-sp\fR, \fB\-sk\fR, \fB\-su\fR et \fB\-sr\fR ne remplacent pas les
fichiers tar ou les r\('epertoires existants. Pour cela, il faut utiliser les
options \fB\-sA\fR, \fB\-sP\fR, \fB\-sK\fR, \fB\-sU\fR et \fB\-sR.\fR
.IP "\fB\-sk\fR" 4
.IX Item "-sk"
Sp\('ecifie que le source d'origine est attendu sous forme tar ; par d\('efaut,
\&\fIpaquet\fR\fB_\fR\fIversion-amont\fR\fB.orig.tar\fR\fIextension\fR. Il le laisse en place
en tant que fichier tar ou le copie dans le r\('epertoire en cours s'il n'y est
pas d\('ej\(`a. Le fichier sera d\('epaquet\('e dans \fIr\('epertoire\fR\fB.orig\fR pour la
g\('en\('eration du fichier diff.
.IP "\fB\-sp\fR" 4
.IX Item "-sp"
Comme \fB\-sk\fR mais supprimera le r\('epertoire \(`a nouveau par la suite.
.IP "\fB\-su\fR" 4
.IX Item "-su"
Quand on sp\('ecifie que le source d'origine est un r\('epertoire ; la valeur par
d\('efaut est le r\('epertoire \fIpaquet\fR\fB\-\fR\fIversion-amont\fR\fB.orig\fR et
\&\fBdpkg-source\fR cr\('ee une nouvelle archive du source d'origine.
.IP "\fB\-sr\fR" 4
.IX Item "-sr"
Comme \fB\-su\fR mais supprimera ce r\('epertoire apr\(`es utilisation.
.IP "\fB\-ss\fR" 4
.IX Item "-ss"
Indique que le source d'origine est disponible \(`a la fois comme un r\('epertoire
et comme un fichier tar. \fBdpkg-source\fR se servira du r\('epertoire pour cr\('eer
le \(Fo diff \(Fc, mais du fichier tar pour cr\('eer le fichier \fB.dsc\fR. Aussi, faire
attention avec cette option. Si le r\('epertoire et le fichier tar ne
correspondent pas, il en r\('esulte une mauvaise archive source.
.IP "\fB\-sn\fR" 4
.IX Item "-sn"
Indique de ne pas chercher de source d'origine et de ne pas cr\('eer de
\(Fo diff \(Fc. Le second argument, s'il existe, doit \(^etre une cha\(^ine vide. Cela
sert pour les paquets Debian pure souche qui n'ont pas un source d'origine
distincte et donc pas de fichier \(Fo diff \(Fc de debianisation.
.IP "\fB\-sa\fR or \fB\-sA\fR" 4
.IX Item "-sa or -sA"
Indique comme source d'origine soit un fichier tar, soit un r\('epertoire \(em le
deuxi\(`eme argument, s'il existe, doit \(^etre l'un d'eux ou bien une cha\(^ine vide
(cela revient \(`a utiliser l'option \fB\-sn)\fR. Quand un fichier tar existe, il
est d\('epaquet\('e pour cr\('eer le fichier \(Fo diff \(Fc ; ensuite il est supprim\('e (cela
revient \(`a utiliser l'option \fB\-sp)\fR ; quand un r\('epertoire est trouv\('e, il est
empaquet\('e et \fBdpkg-source\fR cr\('ee le source d'origine et supprime ensuite ce
r\('epertoire (cela revient \(`a utiliser l'option \fB\-sr)\fR ; quand ni l'un ni
l'autre n'est trouv\('e, \fBdpkg-source\fR suppose que le paquet ne poss\(`ede pas de
fichier \(Fo diff \(Fc de debianisation, mais seulement une simple archive source
(cela revient \(`a utiliser l'option \fB\-sn\fR). Quand les deux sont trouv\('es,
\&\fBdpkg-source\fR ignore le r\('epertoire et le remplace si l'option \fB\-sA\fR a \('et\('e
sp\('ecifi\('ee (cela revient \(`a utiliser l'option \fB\-sP)\fR ou il provoque une
erreur si l'option \fB\-sa\fR a \('et\('e sp\('ecifi\('ee. L'option par d\('efaut est \fB\-sa\fR.
.IP "\fB\-\-abort\-on\-upstream\-changes\fR" 4
.IX Item "--abort-on-upstream-changes"
Ce processus \('echoue si le fichier de diff\('erences contient des modifications
apport\('ees \(`a des fichiers en dehors du sous\-r\('epertoire debian (depuis
dpkg 1.15.8). Cette option n'est pas autoris\('ee dans \fBdebian/source/options\fR
mais peut \(^etre utilis\('ee dans \fBdebian/source/local\-options\fR.
.PP
\&\fBoptions d'extraction (avec \-\-extract) :\fR
.PP
Dans tous ces cas, l'arborescence existante des sources d'origine est
supprim\('ee.
.IP "\fB\-sp\fR" 4
.IX Item "-sp"
Quand on extrait le r\('epertoire source d'origine (s'il existe), il est
conserv\('e en tant que fichier tar. S'il n'est pas d\('ej\(`a dans le r\('epertoire
courant ou si ce r\('epertoire contient un fichier diff\('erent, le fichier tar
est copi\('e dans ce r\('epertoire. (\fBCela est le comportement par d\('efaut\fR).
.IP "\fB\-su\fR" 4
.IX Item "-su"
D\('epaquetage de l'arborescence du r\('epertoire source d'origine.
.IP "\fB\-sn\fR" 4
.IX Item "-sn"
Assure que le r\('epertoire source d'origine ne sera ni copi\('e dans le
r\('epertoire en cours, ni d\('epaquet\('e. Si une arborescence source d'origine est
pr\('esente dans le r\('epertoire courant, elle est toujours supprim\('ee.
.PP
Toutes les options \fB\-s\fR\fIX\fR s'excluent mutuellement. Si vous en indiquez
plusieurs, seule la derni\(`ere sera prise en compte.
.IP "\fB\-\-skip\-debianization\fR" 4
.IX Item "--skip-debianization"
Passe l'\('etape d'application du fichier de diff\('erences Debian aux sources
amont (depuis dpkg 1.15.1).
.SS "Format : 2.0"
.IX Subsection "Format : 2.0"
Extraction prise en charge depuis dpkg 1.13.9, construction depuis
dpkg 1.14.8. Aussi connu sous le nom de \(Fo wig&pen \(Fc. Ce format n'est pas
recommand\('e pour une utilisation massive, le format \(Fo 3.0 (quilt) \(Fc le
remplace. Wig&pen a \('et\('e la premi\(`ere sp\('ecification d'une nouvelle g\('en\('eration
de format de paquet source.
.PP
Le comportement de ce format est le m\(^eme que pour le format \(Fo 3.0 (quilt) \(Fc
sauf qu'il n'utilise pas de liste explicite de correctifs. Tous les fichiers
dans \fBdebian/patches/\fR correspondant \(`a l'expression rationnelle Perl
\&\fB[\ew\-]+\fR doivent \(^etre des correctifs valables : ils sont appliqu\('es au
moment de l'extraction.
.PP
Lors de la construction d'un nouveau paquet source, toute modification
apport\('ee au source amont est enregistr\('ee dans un correctif nomm\('e
\&\fBzz_debian\-diff\-auto\fR.
.SS "Format : 3.0 (native)"
.IX Subsection "Format : 3.0 (native)"
Pris en charge depuis dpkg 1.14.17. Ce format est une extension du format de
paquet natif tel que d\('efini dans le format 1.0. Il g\(`ere toutes les m\('ethodes
de compression et ignore par d\('efaut tout fichier et r\('epertoire sp\('ecifique \(`a
\&\s-1VCS\s0 ainsi que de nombreux fichiers temporaires (voir la valeur par d\('efaut
associ\('ee \(`a l'option \fB\-I\fR dans la sortie de \fB\-\-help\fR).
.SS "Format : 3.0 (quilt)"
.IX Subsection "Format : 3.0 (quilt)"
Pris en charge depuis 1.14.17. Un paquet source dans ce format contient au
moins une archive tar d'origine (\fB.orig.tar.\fR\fIext\fR o\(`u \fIext\fR peut \(^etre
\&\fBgz\fR, \fBbz2\fR \fBlzma\fR et \fBxz\fR) et une archive tar debian
(\fB.debian.tar.\fR\fIext\fR). Il peut \('egalement contenir d'autres archives tar
d'origine (\fB.orig\-\fR\fIcomposant\fR\fB.tar.\fR\fIext\fR). \fIcomposant\fR ne peut \(^etre
constitu\('e que de caract\(`eres alphanum\('eriques (\(Fo a\-zA\-Z0\-9 \(Fc) et de tirets
(\(Fo \- \(Fc). Chaque archive tar originale peut \(^etre accompagn\('ee de fa\(,con
facultative d'une signature amont s\('epar\('ee (\fB.orig.tar.\fR\fIext\fR\fB.asc\fR et
\&\fB.orig\-\fR\fIcomposant\fR\fB.tar.\fR\fIext\fR\fB.asc\fR), extraction prise en charge
depuis dpkg 1.17.20, construction depuis dpkg 1.18.5.
.PP
\&\fBExtraction\fR
.PP
L'archive principale tar d'origine est extraite tout d'abord, puis toutes
les autres archives tar d'origine sont extraites dans des sous\-r\('epertoires
dont le nom est form\('e \(`a partir de la partie \fIcomposant\fR de leur
nom. L'archive tar Debian est extraite du r\('epertoire source, apr\(`es la
suppression de tout r\('epertoire \fBdebian\fR existant. Notez que l'archive tar
Debian doit contenir un sous\-r\('epertoire \fBdebian\fR, mais elle peut \('egalement
contenir des fichiers binaires en dehors de ce r\('epertoire (voir l'option
\&\fB\-\-include\-binaries\fR).
.PP
Toutes les modifications figurant dans
\&\fBdebian/patches/\fR\fIdistributeur\fR\fB.series\fR ou \fBdebian/patches/series\fR sont
alors appliqu\('ees, o\(`u \fIdistributeur\fR sera le nom en minuscules du
distributeur actuel, ou Debian s'il n'y a pas de distributeur d\('efini. Si
l'ancien fichier est utilis\('e et qu'il n'y en a pas de plus r\('ecent (ou si
c'est un lien symbolique), alors celui-ci est remplac\('e par un lien
symbolique vers l'ancien. Cette disposition vise \(`a simplifier l'utilisation
de \fBquilt\fR pour g\('erer l'ensemble des correctifs. Les fichiers de s\('eries
propres au distributeur sont destin\('es \(`a permettre de s\('erialiser plusieurs
branches de d\('eveloppement en se basant sur le distributeur, d'une mani\(`ere
d\('eclarative, de pr\('ef\('erence au codage ouvert de cette gestion dans
\&\fBdebian/rules\fR. Cela est particuli\(`erement utile quand le source \(`a besoin de
correctifs de mani\(`ere conditionnelle car les fichiers affect\('es n\(cqont pas de
gestion interne d\(cqinclusion conditionnelle. Notez toutefois que si
\&\fBdpkg-source\fR analyse correctement les fichiers de s\('eries avec les options
utilis\('ees pour l'application du correctif (stock\('ees sur chaque ligne apr\(`es
le nom du correctif et une ou plusieurs espaces), il n'ignore pas ces
options et s'attendra toujours \(`a ce que les correctifs puissent \(^etre
appliqu\('es avec l'option \fB\-p1\fR de \fBpatch\fR. Il va donc \('emettre un
avertissement lorsqu'il rencontrera ces options, et la construction est
susceptible d'\('echouer.
.PP
Notez que \fBlintian\fR(1) \('emettra des avertissements sans condition lors de
l'utilisation de s\('eries de distributeur du fait d'une r\(`egle controvers\('ee
particuli\(`ere de Debian qui ne devrait pas affecter une utilisation externe ;
pour les faire taire, le profil lintian de dpkg peut \(^etre utilis\('e en passant
l'option \(Fo\fB\-\-profile dpkg\fR\(Fc \(`a \fBlintian\fR(1).
.PP
La date de tous les fichiers correctifs est celle du moment o\(`u se d\('eroule
l'extraction du paquet source (cela \('evite les horodatages faux menant \(`a des
probl\(`emes lorsque des fichiers g\('en\('er\('es automatiquement sont modifi\('es).
.PP
Au contraire du comportement par d\('efaut de \fBquilt\fR, les correctifs doivent
s'appliquer sans d\('ecalage (\(Fo fuzz \(Fc). Quand cela n'est pas le cas, il est
sugg\('er\('e de les rafra\(^ichir avec \fBquilt\fR sinon \fBdpkg-source\fR se terminera
avec une erreur en tentant de les appliquer.
.PP
Similaire au comportement par d\('efaut de \fBquilt\fR, les modifications peuvent
aussi supprimer des fichiers.
.PP
Le fichier \fB.pc/applied\-patches\fR est cr\('e\('e si certains correctifs ont \('et\('e
appliqu\('es au cours de l'extraction.
.PP
\&\fBConstruction\fR
.PP
Les originaux de toutes les archives tar trouv\('ees dans le r\('epertoire courant
sont extraits dans un r\('epertoire temporaire en suivant la m\(^eme logique que
pour le d\('epaquetage, le r\('epertoire debian est copi\('e dans le r\('epertoire
temporaire, et tous les correctifs except\('e le correctif automatique
\&\fBdebian\-changes\-\fR\fIversion\fR ou \fBdebian-changes\fR, selon
\&\fB\-\-single\-debian\-patch\fR) sont appliqu\('ees. Le r\('epertoire temporaire est
compar\('e \(`a celui du paquet source. Si le fichier de diff\('erences n'est pas
vide, la construction \('echoue \(`a moins que \fB\-\-single\-debian\-patch\fR ou
\&\fB\-\-auto\-commit\fR  aient \('et\('e utilis\('es, et dans ce cas le diff est stock\('e dans
le correctif automatique. Si le correctif automatique est cr\('e\('e ou supprim\('e,
il est ajout\('e ou supprim\('e dans le fichier \(Fo series \(Fc et les m\('etadonn\('ees de
\&\fBquilt\fR.
.PP
Any change on a binary file is not representable in a diff and will thus
lead to a failure unless the maintainer deliberately decided to include that
modified binary file in the debian tarball (by listing it in
\&\fBdebian/source/include\-binaries\fR). The build will also fail if it finds
binary files in the debian sub-directory unless they have been allowed
through \fBdebian/source/include\-binaries\fR.
.PP
Le r\('epertoire debian mis \(`a jour et la liste des binaires modifi\('es sont
ensuite utilis\('es pour recr\('eer l'archive tar debian.
.PP
Le diff g\('en\('er\('e automatiquement n'inclut pas les changements sp\('ecifiques sur
les fichiers \s-1VCS\s0 ainsi sur que de nombreux fichiers temporaires (pour la
valeur par d\('efaut associ\('ee \(`a l'option \fB\-i\fR, voir la sortie de
\&\fB\-\-help\fR). En particulier, le r\('epertoire \fB.pc\fR utilis\('e par \fBquilt\fR est
ignor\('e lors de la g\('en\('eration automatique du correctif.
.PP
\&\fBNote:\fR \fBdpkg-source\fR \fB\-\-before\-build\fR (and \fB\-\-build\fR) will ensure that
all patches listed in the series file are applied so that a package build
always has all patches applied. It does this by finding unapplied patches
(they are listed in the \fBseries\fR file but not in \fB.pc/applied\-patches\fR),
and if the first patch in that set can be applied without errors, it will
apply them all. The option \fB\-\-no\-preparation\fR can be used to disable this
behavior.
.PP
\&\fBEnregistrement des modifications\fR
.IP "\fB\-\-commit\fR [\fIr\('epertoire\fR] [\fInom-du-correctif\fR] [\fIfichier-de-correctif\fR]" 4
.IX Item "--commit [r\('epertoire] [nom-du-correctif] [fichier-de-correctif]"
Cr\('ee un correctif correspondant aux modifications locales non g\('er\('ees par le
syst\(`eme de gestion de correctifs \fBquilt\fR et les int\(`egre dans la liste des
correctifs sous le nom \fInom-du-correctif\fR. Si le nom est omis, il sera
demand\('e interactivement. Si \fIfichier-de-correctifs\fR est indiqu\('e, il est
utilis\('e comme fichier de modifications locales \(`a int\('egrer. Une fois int\('egr\('e,
un \('editeur est lanc\('e afin de permettre d'ajouter des m\('eta\-informations dans
l'en\-t\(^ete du correctif.
.Sp
Le fait de passer \fIfichier-de-correctifs\fR est essentiellement utile apr\(`es
un \('echec de construction qui pr\('eg\('en\(`ere ce fichier. Sur ces bases, le fichier
est supprim\('e apr\(`es int\('egration. Veuillez \('egalement noter que les
modifications contenues dans le fichier de correctifs doivent d\('ej\(`a \(^etre
appliqu\('ees dans l'arborescence et que les fichiers modifi\('es par le correctif
ne doivent pas comporter de modifications suppl\('ementaires.
.Sp
Si la cr\('eation de correctif d\('etecte des fichiers binaires modifi\('es, ils
seront ajout\('es automatiquement \(`a \fBdebian/source/include\-binaries\fR afin de
pouvoir \(^etre inclus dans l'archive debian (de fa\(,con analogue \(`a ce que ferait
\&\fBdpkg-source \-\-include\-binaries \-\-build\fR).
.PP
\&\fBOptions de construction\fR
.IP "\fB\-\-allow\-version\-of\-quilt\-db=\fR\fIversion\fR" 4
.IX Item "--allow-version-of-quilt-db=version"
Autorise \fBdpkg-source\fR \(`a construire le fichier si la version des
m\('etadonn\('ees de \fBquilt\fR est celle indiqu\('ee, m\(^eme si \fBdpkg-source\fR n'en n'a
pas connaissance (depuis dpkg 1.15.5.4). En fait, cela indique que la
version indiqu\('ee des m\('etadonn\('ees de \fBquilt\fR est compatible avec la
version 2 que \fBdpkg-source\fR g\(`ere. La version des m\('etadonn\('ees de \fBquilt\fR
est conserv\('ee dans \fB.pc/.version\fR.
.IP "\fB\-\-include\-removal\fR" 4
.IX Item "--include-removal"
N'ignore pas les fichiers supprim\('es et les inclut dans le fichier de
modifications g\('en\('er\('e automatiquement.
.IP "\fB\-\-include\-timestamp\fR" 4
.IX Item "--include-timestamp"
Inclut la date dans le correctif g\('en\('er\('e automatiquement.
.IP "\fB\-\-include\-binaries\fR" 4
.IX Item "--include-binaries"
Ajoute tous les binaires modifi\('es dans l'archive tar debian. Les ajoute
aussi \(`a \fBdebian/source/include\-binaries\fR : elles seront ajout\('ees par d\('efaut
dans les constructions suivantes aussi cette option n'est donc plus
n\('ecessaire.
.IP "\fB\-\-no\-preparation\fR" 4
.IX Item "--no-preparation"
N'essaye pas de pr\('eparer l'arbre de la construction en appliquant les
correctifs qui ne sont apparemment pas appliqu\('es (depuis dpkg 1.14.8).
.IP "\fB\-\-single\-debian\-patch\fR" 4
.IX Item "--single-debian-patch"
Utilise \fBdebian/patches/debian\-changes\fR au lieu de
\&\fBdebian/patches/debian\-changes\-\fR\fIversion\fR comme nom du correctif
automatique cr\('e\('e au cours de la construction (depuis dpkg 1.15.5.4). Cette
option est particuli\(`erement pratique lorsque le paquet est g\('er\('e avec un
outil de gestion de versions et qu'un jeu de correctifs ne peut \(^etre cr\('e\('e de
fa\(,con fiable. Dans ce cas, les diff\('erences avec la version amont doivent
\(^etre conserv\('ees dans un correctif unique. Cette option serait indiqu\('ee dans
\&\fBdebian/source/local\-options\fR et accompagn\('ee par un fichier
\&\fBdebian/source/local\-patch\-header\fR qui explique la meilleure m\('ethode pour
revoir les corrections sp\('ecifiques \(`a Debian, par exemple dans le
gestionnaire de versions utilis\('e.
.IP "\fB\-\-create\-empty\-orig\fR" 4
.IX Item "--create-empty-orig"
Cr\('ee automatiquement l'archive principale tar d'origine vide si elle est
manquante et qu'il existe des archives tar d'origine additionnelles (depuis
dpkg 1.15.6). Cette option peut \(^etre utilis\('ee lorsque le paquet source est
une collection de diff\('erents sources amont et qu'il n'existe pas de logiciel
\(Fo principal \(Fc.
.IP "\fB\-\-no\-unapply\-patches, \-\-unapply\-patches\fR" 4
.IX Item "--no-unapply-patches, --unapply-patches"
Par d\('efaut, \fBdpkg-source\fR retire automatiquement les correctifs dans le
point d'entr\('ee \fB\-\-after\-build\fR s'ils ont \('et\('e appliqu\('es pendant
\&\fB\-\-before\-build\fR (\fB\-\-unapply\-patches\fR depuis dpkg 1.15.8,
\&\fB\-\-no\-unapply\-patches\fR depuis dpkg 1.16.5). Ces options permettent de
d\('esactiver ou activer unilat\('eralement ce retrait des correctifs. Elles ne
sont permises que dans \fBdebian/source/local\-options\fR afin que tous les
paquets source cr\('e\('es aient le m\(^eme comportement par d\('efaut.
.IP "\fB\-\-abort\-on\-upstream\-changes\fR" 4
.IX Item "--abort-on-upstream-changes"
Ce processus \('echouera si un correctif automatique a \('et\('e cr\('e\('e (depuis
dpkg 1.15.8). Cette option peut servir \(`a v\('erifier que toutes les
modifications ont \('et\('e enregistr\('ees correctement dans des correctifs \fBquilt\fR
distincts avant la construction du paquet source. Elle n'est pas autoris\('ee
dans \fBdebian/source/options\fR mais peut prendre place dans
\&\fBdebian/source/local\-options\fR.
.IP "\fB\-\-auto\-commit\fR" 4
.IX Item "--auto-commit"
Pas d'\('echec du processus de construction si un correctif automatique a \('et\('e
cr\('e\('e : il est enregistr\('e automatiquement dans le fichier series de \fBquilt\fR.
.PP
\&\fBOptions d'extraction\fR
.IP "\fB\-\-skip\-debianization\fR" 4
.IX Item "--skip-debianization"
Passe l'\('etape d'extraction de l'archive tar debian des sources amont (depuis
dpkg 1.15.1).
.IP "\fB\-\-skip\-patches\fR" 4
.IX Item "--skip-patches"
Ne pas appliquer des correctifs \(`a la fin de l'extraction (depuis
dpkg 1.14.18).
.SS "Format : 3.0 (custom)"
.IX Subsection "Format : 3.0 (custom)"
Pris en charge depuis dpkg 1.14.17. Ce format est particulier. Il ne
repr\('esente pas un r\('eel format de paquet source mais peut \(^etre utilis\('e pour
cr\('eer des paquets sources avec des fichiers arbitraires.
.PP
\&\fBOptions de construction\fR
.PP
Tous les arguments qui ne sont pas des options sont pris pour des fichiers \(`a
int\('egrer dans le paquet source g\('en\('er\('e. Ils doivent exister et \(^etre de
pr\('ef\('erence dans le r\('epertoire courant. Au moins un fichier doit \(^etre donn\('e.
.IP "\fB\-\-target\-format=\fR\fIvaleur\fR" 4
.IX Item "--target-format=valeur"
\&\fBRequired\fR. D\('efinit le format r\('eel du paquet source g\('en\('er\('e. Le fichier
g\('en\('er\('e .dsc contiendra cette valeur dans son champ \fBformat\fR et non \(Fo 3.0
(custom) \(Fc.
.SS "Format : 3.0 (git)"
.IX Subsection "Format : 3.0 (git)"
Pris en charge depuis dpkg 1.14.17. Ce format est exp\('erimental.
.PP
Un paquet source qui utilise ce format est constitu\('e d'un seul ensemble d'un
d\('ep\(^ot git \fB.git\fR qui contient les sources du paquet. Il peut \('egalement
exister un fichier \fI.gitshallow\fR qui donne les r\('evisions d'un clone git
\(Fo shallow \(Fc.
.PP
\&\fBExtraction\fR
.PP
Cet ensemble est clon\('e sous forme d'un d\('ep\(^ot git dans le r\('epertoire
cible. S'il existe un fichier \fI.gitshallow\fR, il est install\('e en tant que
\&\fI.git/shallow\fR dans le d\('ep\(^ot git clon\('e.
.PP
Veuillez noter que, par d\('efaut, le nouveau d\('ep\(^ot aura la m\(^eme branche
r\('ecup\('er\('ee que celle qui \('etait r\('ecup\('er\('ee dans les sources d'origine (souvent
\(Fo master \(Fc mais cela peut \(^etre tout \(`a fait autre chose). Toutes les autres
branches seront disponibles sous \fIremotes/origin\fR.
.PP
\&\fBConstruction\fR
.PP
Avant d'aller plus loin, quelques v\('erifications sont effectu\('ees afin de
s'assurer qu'il n'existe aucun changement non ignor\('e non soumis.
.PP
\&\fBgit-bundle\fR(1) permet de cr\('eer un ensemble \(`a partir du d\('ep\(^ot git. Par
d\('efaut, toutes les branches et \('etiquettes du d\('ep\(^ot sont incluses dans cet
ensemble.
.PP
\&\fBOptions de construction\fR
.IP "\fB\-\-git\-ref=\fR\fIr\('ef\fR" 4
.IX Item "--git-ref=r\('ef"
Permet d'indiquer une r\('ef\('erence git \(`a inclure dans l'ensemble
git. L'utilisation de cette option d\('esactive le comportement par d\('efaut qui
est d'inclure toutes les branches et \('etiquettes. Cette option peut \(^etre
utilis\('ee plusieurs fois. Le param\(`etre \fIr\('ef\fR peut \(^etre le nom d'une branche
ou une \('etiquette \(`a inclure. Il peut \('egalement \(^etre tout param\(`etre que l'on
peut passer \(`a \fBgit-rev-list\fR(1). Par exemple, pour n'inclure que la branche
\(Fo master \(Fc, on peut utiliser \fB\-\-git\-ref=\fRmaster. Pour inclure toutes les
\('etiquettes et toutes les branches, sauf la branche priv\('ee, on peut utiliser
\&\-\fBgit\-ref=\fR\-\-all \fB\-\- git\-ref=\fR^private.
.IP "\fB\-\-git\-depth=\fR\fInombre\fR" 4
.IX Item "--git-depth=nombre"
Cr\('ee un clone \(Fo shallow \(Fc dont l'historique est tronqu\('e au nombre indiqu\('e de
r\('evisions.
.SS "Format : 3.0 (bzr)"
.IX Subsection "Format : 3.0 (bzr)"
Pris en charge depuis dpkg 1.14.17. Ce format est exp\('erimental. Il cr\('ee une
archive tar contenant le d\('ep\(^ot bzr correspondant.
.PP
\&\fBExtraction\fR
.PP
L'archive tar est d\('ecompress\('ee puis bzr est utilis\('e afin de r\('ecup\('erer la
branche courante.
.PP
\&\fBConstruction\fR
.PP
Avant d'aller plus loin, quelques v\('erifications sont effectu\('ees afin de
s'assurer qu'il n'existe aucun changement non ignor\('e non soumis.
.PP
Ensuite, la partie sp\('ecifique du r\('epertoire source du gestionnaire de
versions est copi\('ee dans un r\('epertoire temporaire. Avant que ce r\('epertoire
temporaire ne soit empaquet\('e dans une archive tar, divers nettoyages sont
effectu\('es pour \('economiser de l'espace.
.SH "DIAGNOSTICS"
.IX Header "DIAGNOSTICS"
.SS "aucun format source indiqu\('e dans debian/source/format"
.IX Subsection "aucun format source indiqu\('e dans debian/source/format"
Le fichier \fBdebian/source/format\fR devrait toujours exister et indiquer le
format source souhait\('e. Pour pr\('eserver la compatibilit\('e avec d'anciennes
versions, le format \(Fo 1.0 \(Fc est implicite quand le fichier n'existe pas. Il
est d\('econseill\('e de d\('ependre de ce comportement qui pourrait \(^etre modifi\('e
dans de futures versions de \fBdpkg-source\fR, qui \('echoueront alors en
l'absence d'une mention explicite de format.
.PP
Cela est d\(^u au fait que le format \(Fo 1.0 \(Fc n'est plus le format recommand\('e,
qu'il est conseill\('e de choisir un des formats les plus r\('ecents (\(Fo 3.0
(quilt) \(Fc ou \(Fo 3.0 (native) \(Fc) mais que dpkg-source ne le fera pas
automatiquement. Si vous souhaitez continuer \(`a utiliser l'ancien format, il
est n\('ecessaire d'\(^etre explicite et indiquer \(Fo 1.0 \(Fc dans
\&\fBdebian/source/format\fR.
.SS "le fichier de diff\('erences modifie les fichiers amont suivants"
.IX Subsection "le fichier de diff\('erences modifie les fichiers amont suivants"
Lors de l'utilisation du format source \(Fo 1.0 \(Fc, il est d\('econseill\('e de
modifier directement les fichiers amont car les modifications restent alors
cach\('ees et souvent non document\('ees dans le fichier diff.gz. Au contraire, il
est conseill\('e de conserver les modifications sous forme de correctifs dans
le r\('epertoire debian et de les appliquer au moment de la construction. Pour
\('eviter ces op\('erations plus complexes, vous pouvez \('egalement choisir le
format \(Fo 3.0 (quilt) \(Fc qui permet ces op\('erations de mani\(`ere native.
.SS "impossible d'identifier les changements de \fIfichier\fP"
.IX Subsection "impossible d'identifier les changements de fichier"
Les modifications des sources amont sont en g\('en\('eral conserv\('ees dans des
fichiers de correctifs mais certaines modifications ne peuvent \(^etre
repr\('esent\('ees sous forme de tels fichiers qui ne peuvent modifier que des
fichiers texte. Si vous essayez de remplacer un fichier avec un objet d'un
type diff\('erent (par exemple remplacer un fichier par un lien ou un
r\('epertoire), ce message d'erreur s'affichera.
.SS "le fichier \fIfichier\fP, nouvellement cr\('e\('e, ne sera pas repr\('esent\('e dans le fichier de diff\('erences"
.IX Subsection "le fichier fichier, nouvellement cr\('e\('e, ne sera pas repr\('esent\('e dans le fichier de diff\('erences"
Les fichiers vides ne peuvent pas \(^etre cr\('e\('es avec des correctifs. En
cons\('equence, la modification n'est pas enregistr\('ee dans le paquet source, ce
qui provoque cet avertissement.
.SS "le mode ex\('ecutable \fIpermissions\fP de \fIfichier\fP ne sera pas repr\('esent\('e dans le fichier de diff\('erences"
.IX Subsection "le mode ex\('ecutable permissions de fichier ne sera pas repr\('esent\('e dans le fichier de diff\('erences"
Les fichiers de correctifs n'enregistrent pas les permissions de fichiers
et, en cons\('equence, les permissions des ex\('ecutables ne sont pas enregistr\('ees
dans le paquet source, ce qui provoque cet avertissement.
.SS "le mode sp\('ecial \fIpermissions\fP de \fIfichier\fP ne sera pas repr\('esent\('e dans le fichier de diff\('erences"
.IX Subsection "le mode sp\('ecial permissions de fichier ne sera pas repr\('esent\('e dans le fichier de diff\('erences"
Les fichiers correctifs n'enregistrent pas les permissions de fichiers et,
en cons\('equence, les permissions modifi\('ees ne sont pas enregistr\('ees dans le
paquet source, ce qui provoque cet avertissement.
.SH "ENVIRONNEMENT"
.IX Header "ENVIRONNEMENT"
.IP "\fB\s-1DPKG_COLORS\s0\fR" 4
.IX Item "DPKG_COLORS"
D\('efinit le mode de couleur (depuis dpkg 1.18.5). Les valeurs actuellement
accept\('ees sont \fBauto\fR (par d\('efaut), \fBalways\fR et \fBnever\fR.
.IP "\fB\s-1DPKG_NLS\s0\fR" 4
.IX Item "DPKG_NLS"
Si cette variable est d\('efinie, elle sera utilis\('ee pour d\('ecider l'activation
de la prise en charge des langues (\s-1NLS\s0 \(en Native Language Support), connu
aussi comme la gestion de l'internationalisation (ou i18n) (depuis
dpkg 1.19.0). Les valeurs permises sont : \fB0\fR et \fB1\fR (par d\('efaut).
.IP "\fB\s-1SOURCE_DATE_EPOCH\s0\fR" 4
.IX Item "SOURCE_DATE_EPOCH"
Si cette option est utilis\('ee, elle sera utilis\('ee comme horodatage (en
seconde \(`a partir de \(Fo l'epoch \(Fc) pour fixer le \(Fo mtime \(Fc dans les entr\('ees du
fichier \fBtar\fR(5).
.IP "\fB\s-1VISUAL\s0\fR" 4
.IX Item "VISUAL"
.PD 0
.IP "\fB\s-1EDITOR\s0\fR" 4
.IX Item "EDITOR"
.PD
Utilis\('e par les modules de format source \(Fo 2.0 \(Fc et \(Fo 3.0 (quilt) \(Fc.
.IP "\fB\s-1GIT_DIR\s0\fR" 4
.IX Item "GIT_DIR"
.PD 0
.IP "\fB\s-1GIT_INDEX_FILE\s0\fR" 4
.IX Item "GIT_INDEX_FILE"
.IP "\fB\s-1GIT_OBJECT_DIRECTORY\s0\fR" 4
.IX Item "GIT_OBJECT_DIRECTORY"
.IP "\fB\s-1GIT_ALTERNATE_OBJECT_DIRECTORIES\s0\fR" 4
.IX Item "GIT_ALTERNATE_OBJECT_DIRECTORIES"
.IP "\fB\s-1GIT_WORK_TREE\s0\fR" 4
.IX Item "GIT_WORK_TREE"
.PD
Utilis\('es par les modules de format source \(Fo 3.0 (git) \(Fc.
.SH "FICHIERS"
.IX Header "FICHIERS"
.SS "debian/source/format"
.IX Subsection "debian/source/format"
Ce fichier contient sur une seule ligne le format \(`a utiliser pour construire
le paquet source (les formats accept\('es sont d\('ecrits plus haut). Il ne doit
pas contenir d'espace avant ou apr\(`es l'indication du format.
.SS "debian/source/include\-binaries"
.IX Subsection "debian/source/include-binaries"
This file contains a list of pathnames of binary files (one per line)
relative to the source root directory that should be included in the debian
tarball.  Leading and trailing spaces are stripped.  Lines starting with
\(oq\fB#\fR\(cq are comments and are skipped.  Empty lines are ignored.
.SS "debian/source/options"
.IX Subsection "debian/source/options"
Ce fichier contient la liste des options qui seront automatiquement ajout\('ees
au jeu d'options de ligne de commande lors de l'appel \(`a \fBdpkg-source
\&\-\-build\fR ou \fBdpkg-source \-\-print\-format\fR. Des options comme
\&\fB\-\-compression\fR et \fB\-\-compression\-level\fR conviennent bien pour ce fichier.
.PP
Chaque option doit \(^etre plac\('ee sur une ligne distincte. Les lignes vides et
les lignes commen\(,cant par le caract\(`ere \(Fo \fB#\fR \(Fc sont ignor\('ees. Les
caract\(`eres initiaux \(Fo \fB\-\-\fR \(Fc doivent \(^etre retir\('es et les options courtes ne
peuvent pas \(^etre utilis\('ees. Des espaces optionnelles sont autoris\('ees autour
du symbole \(Fo \fB=\fR \(Fc, ainsi que des guillemets optionnels autour de la valeur
d'une option donn\('ee. Voici un exemple d'un tel fichier :
.PP
.Vb 7
\& # let dpkg\-source create a debian.tar.bz2 with maximal compression
\& compression = "bzip2"
\& compression\-level = 9
\& # use debian/patches/debian\-changes as automatic patch
\& single\-debian\-patch
\& # ignore changes on config.{sub,guess}
\& extend\-diff\-ignore = "(^|/)(config.sub|config.guess)$"
.Ve
.PP
\&\fBNote:\fR \fBformat\fR options are not accepted in this file, you should use
\&\fBdebian/source/format\fR instead.
.SS "debian/source/local\-options"
.IX Subsection "debian/source/local-options"
Identique \(`a \fBdebian/source/options\fR mais n'est pas enregistr\('e dans le
paquet source cr\('e\('e. Ce fichier peut \(^etre utile pour conserver une pr\('ef\('erence
propre au responsable ou au d\('ep\(^ot de gestionnaire de versions o\(`u le paquet
source est g\('er\('e.
.SS "debian/source/local\-patch\-header"
.IX Subsection "debian/source/local-patch-header"
.SS "debian/source/patch\-header"
.IX Subsection "debian/source/patch-header"
Texte en format libre qui sera ajout\('e au d\('ebut du correctif automatique cr\('e\('e
dans les formats \(Fo 2.0 \(Fc et \(Fo 3.0 (quilt) \(Fc. \fBlocal-patch-header\fR n'est pas
inclus dans le paquet source cr\('e\('e alors que \fBpatch-header\fR l'est.
.SS "debian/patches/\fIdistributeur\fP.series"
.IX Subsection "debian/patches/distributeur.series"
.SS "debian/patches/series"
.IX Subsection "debian/patches/series"
Ce fichier comporte la liste de toutes les correctifs qui ont \('et\('e appliqu\('es
(dans l'ordre indiqu\('e) aux sources amont. Les espaces situ\('ees avant et apr\(`es
les noms sont ignor\('ees. L'argument \fIdistributeur\fR sera le nom en minuscules
du distributeur ou \fBdebian\fR si aucun distributeur n'est d\('efini. Si le
fichier de s\('eries propre au distributeur n'existe pas, le fichier de s\('eries
sans distributeur sera utilis\('e. Les lignes commen\(,cant par \(Fo \fB#\fR \(Fc sont des
commentaires et sont ignor\('ees, ainsi que les lignes vides. Les autres lignes
d\('ebutent par le nom du fichier de correctifs (relatif au r\('epertoire
\&\fBdebian/patches/\fR) et se terminent \(`a la premi\(`ere espace ou \(`a la fin de la
ligne. Des options facultatives de \fBquilt\fR peuvent \(^etre ajout\('ees jusqu'\(`a la
fin de la ligne ou jusqu'au premier caract\(`ere \(Fo \fB#\fR \(Fc pr\('ec\('ed\('e par une ou
plusieurs espaces (ce qui indique le d\('ebut d'un commentaire se terminant \(`a
la fin de la ligne).
.SH "BOGUES"
.IX Header "BOGUES"
Le moment o\(`u se d\('eroule le remplacement d'un champ par rapport \(`a certaines
d\('eterminations de champ affich\('ees sur la sortie standard est plut\(^ot
embrouill\('e.
.SH "VOIR AUSSI"
.IX Header "VOIR AUSSI"
\&\fBdeb-src-control\fR(5), \fBdeb-changelog\fR(5), \fBdsc\fR(5).
.SH "TRADUCTION"
.IX Header "TRADUCTION"
Ariel \s-1VARDI\s0 <ariel.vardi@freesbee.fr>, 2002.
Philippe Batailler, 2006.
Nicolas Fran\(,cois, 2006.
Veuillez signaler toute erreur \(`a <debian\-l10n\-french@lists.debian.org>.
