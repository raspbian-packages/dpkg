.\" Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "dpkg-gensymbols 1"
.TH dpkg-gensymbols 1 "2020-08-02" "1.20.5" "dpkg suite"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NOM"
.IX Header "NOM"
dpkg-gensymbols \- Cr\('eation des fichiers de symboles (information de
d\('ependances de biblioth\(`eques partag\('ees)
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBdpkg-gensymbols\fR [\fIoption\fR...]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBdpkg-gensymbols\fR analyse un r\('epertoire temporaire de construction (par
d\('efaut debian/tmp), y recherche les biblioth\(`eques et cr\('ee un fichier
\&\fIsymbols\fR qui les d\('ecrit. Si ce fichier n'est pas vide, il est install\('e
dans le sous\-r\('epertoire \s-1DEBIAN\s0 du r\('epertoire de construction afin de pouvoir
\(^etre inclus dans les informations de contr\(^ole du paquet.
.PP
Lors de la cr\('eation de ces fichiers, il utilise en entr\('ee certains fichiers
de symboles fournis par le responsable. Il recherche les fichiers suivants
(en utilisant le premier trouv\('e) :
.IP "\(bu" 4
debian/\fIpaquet\fR.symbols.\fIarch\fR
.IP "\(bu" 4
debian/symbols.\fIarch\fR
.IP "\(bu" 4
debian/\fIpaquet\fR.symbols
.IP "\(bu" 4
debian/symbols
.PP
L'int\('er\(^et principal de ces fichiers est de fournir la version minimale
associ\('ee \(`a chaque symbole fourni par les biblioth\(`eques. En g\('en\('eral, cela
correspond \(`a la premi\(`ere version du paquet qui a fourni ce symbole, mais
cette valeur peut \(^etre augment\('ee manuellement par le responsable si
l'interface binaire applicative (\s-1ABI\s0) du symbole est \('etendue sans casser la
compatibilit\('e avec les versions pr\('ec\('edentes. La tenue \(`a jour de ces fichiers
est \(`a la charge du responsable du paquet, avec l'aide de
\&\fBdpkg-gensymbols\fR.
.PP
Quand les fichiers de symboles cr\('e\('es sont diff\('erents de ceux fournis par le
responsable, \fBdpkg-gensymbols\fR affichera les diff\('erences entre les deux
versions. Si ces diff\('erences sont trop importantes, le programme peut m\(^eme
se terminer en \('echec (le nombre de diff\('erences tol\('er\('ees peut \(^etre r\('egl\('e avec
l'option \fB\-c\fR).
.SH "TENUE \(`A JOUR DES FICHIERS SYMBOLES"
.IX Header "TENUE \(`A JOUR DES FICHIERS SYMBOLES"
The base interchange format of the symbols file is described in
\&\fBdeb-symbols\fR(5), which is used by the symbols files included in binary
packages. These are generated from template symbols files with a format
based on the former, described in \fBdeb-src-symbols\fR(5)  and included in
source packages.
.PP
The symbols files are really useful only if they reflect the evolution of
the package through several releases. Thus the maintainer has to update them
every time that a new symbol is added so that its associated minimal version
matches reality.
.PP
The diffs contained in the build logs can be used as a starting point, but
the maintainer, additionally, has to make sure that the behaviour of those
symbols has not changed in a way that would make anything using those
symbols and linking against the new version, stop working with the old
version.
.PP
In most cases, the diff applies directly to the debian/\fIpackage\fR.symbols
file. That said, further tweaks are usually needed: it's recommended for
example to drop the Debian revision from the minimal version so that
backports with a lower version number but the same upstream version still
satisfy the generated dependencies.  If the Debian revision can't be dropped
because the symbol really got added by the Debian specific change, then one
should suffix the version with \(oq\fB~\fR\(cq.
.PP
Avant d'appliquer le correctif au fichier de symboles, le responsable doit
contr\(^oler qu'il est correct. Les symboles publics sont suppos\('es ne jamais
dispara\(^itre et le correctif ne devrait donc qu'ajouter des lignes.
.PP
Note that you can put comments in symbols files.
.PP
N'oubliez pas de v\('erifier si les anciennes versions des symboles ne doivent
pas \(^etre incr\('ement\('ees. Il n'y a pas de moyen pour que \fBdpkg-gensymbols\fR
pr\('evienne de cela. Appliquer aveuglement le fichier de diff\('erences ou
supposer qu'il n'y a rien \(`a changer, s'il n'y a pas de fichier de
diff\('erences, sans v\('erifier s'il y a ces modifications, peut faire que des
paquets, avec des d\('ependances l\(^aches, pr\('etendent qu'ils peuvent fonctionner
avec des paquets plus anciens avec lesquels ils ne peuvent fonctionner. Cela
introduira des bogues difficiles \(`a trouver avec des mises \(`a niveau
(partielles).
.SS "Bonnes pratiques de gestion des biblioth\(`eques"
.IX Subsection "Bonnes pratiques de gestion des biblioth\(`eques"
Une biblioth\(`eque bien maintenue offre les possibilit\('es suivantes :
.IP "\(bu" 4
son interface de programmation (\s-1API\s0) est stable (les symboles publics ne
sont jamais supprim\('es et les changements ne concernent que des ajouts de
nouveaux symboles publics) et les modifications provoquant une
incompatibilit\('e doivent \(^etre combin\('es avec un changement de \s-1SONAME\s0 ;
.IP "\(bu" 4
id\('ealement, elle utilise le versionnage des symboles pour garantir la
stabilit\('e de l'interface applicative binaire (\s-1ABI\s0) malgr\('e ses modifications
internes et l'extension de son \s-1API\s0 ;
.IP "\(bu" 4
elle n'exporte pas les symboles priv\('es (afin de contourner cela, de tels
symboles peuvent \(^etre \('etiquet\('es comme optionnels).
.PP
En maintenant le fichier de symboles, il est facile d'en voir appara\(^itre et
dispara\(^itre. Cependant, il est plus difficile de contr\(^oler la pr\('esence
d'\('eventuelles modifications d'\s-1API\s0 ou \s-1ABI.\s0 En cons\('equence, le responsable
doit contr\(^oler soigneusement le journal des modifications amont, \(`a la
recherche de cas o\(`u une saine gestion des biblioth\(`eques peut avoir \('et\('e
omise. Si des probl\(`emes potentiels sont d\('ecouverts, l'auteur amont doit \(^etre
averti(e) car une correction en amont est meilleure qu'un travail sp\('ecifique
au paquet Debian.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-P\fR\fIr\('epertoire\-construction\-paquet\fR" 4
.IX Item "-Pr\('epertoire-construction-paquet"
Analyse de \fIr\('epertoire\-construction\-paquet\fR, plut\(^ot que debian/tmp.
.IP "\fB\-p\fR\fIpaquet\fR" 4
.IX Item "-ppaquet"
D\('efinit le nom du paquet. Requis si plus d'un paquet binaire est indiqu\('e
dans debian/control (ou s'il n'y a pas de fichier debian/control).
.IP "\fB\-v\fR\fIversion\fR" 4
.IX Item "-vversion"
D\('efinit la version du paquet. La valeur par d\('efaut est la version extraite
de debian/changelog. Ce param\(`etre est requis si le programme est lanc\('e en
dehors de l'arborescence source d'un paquet.
.IP "\fB\-e\fR\fIfichier\-biblioth\(`eque\fR" 4
.IX Item "-efichier-biblioth\(`eque"
N'analyse que les biblioth\(`eques explicitement mentionn\('ees au lieu de
rechercher toutes les biblioth\(`eques publiques. Les motifs du shell peuvent
\(^etre utilis\('es pour l'expansion des chemins d'acc\(`es (voir la page de manuel
de \fBFile::Glob\fR(3perl) pour plus d'informations) dans
\&\fIfichier\-biblioth\(`eque\fR pour \('etablir une correspondance avec plusieurs
biblioth\(`eques avec un seul param\(`etre (afin d'\('eviter d'utiliser plusieurs
options \fB\-e\fR).
.IP "\fB\-l\fR\fIr\('epertoire\fR" 4
.IX Item "-lr\('epertoire"
Ajoute \fIr\('epertoire\fR au d\('ebut de la liste des r\('epertoires o\(`u chercher des
biblioth\(`eques partag\('ees priv\('ees (depuis dpkg 1.19.1). Cette option peut \(^etre
utilis\('ee plusieurs fois.
.Sp
\&\fBNote:\fR Use this option instead of setting \fB\s-1LD_LIBRARY_PATH\s0\fR, as that
environment variable is used to control the run-time linker and abusing it
to set the shared library paths at build-time can be problematic when
cross-compiling for example.
.IP "\fB\-I\fR\fInom-de-fichier\fR" 4
.IX Item "-Inom-de-fichier"
Utilise \fInom-de-fichier\fR comme fichier de r\('ef\('erence pour cr\('eer le fichier
de symboles \(`a int\('egrer dans le paquet lui\-m\(^eme.
.IP "\fB\-O\fR[\fInom-de-fichier\fR]" 4
.IX Item "-O[nom-de-fichier]"
Affiche le fichier de symboles cr\('e\('e sur la sortie standard ou dans le
\&\fInom-de-fichier\fR, si sp\('ecifi\('e, plut\(^ot que dans \fBdebian/tmp/DEBIAN/symbols\fR
(ou \fIr\('epertoire\-construction\-paquet\fR\fB/DEBIAN/symbols\fR si \fB\-P\fR est
pr\('esent). Si \fInom-de-fichier\fR existe d\('ej\(`a, son contenu sera utilis\('e comme
base pour le fichier cr\('e\('e. Cette fonctionnalit\('e permet de mettre \(`a jour le
fichier de symboles pour qu'il corresponde \(`a une nouvelle version amont de
la biblioth\(`eque.
.IP "\fB\-t\fR" 4
.IX Item "-t"
\('Ecrit le fichier de symboles en mode mod\(`ele plut\(^ot que dans un format
compatible avec \fBdeb-symbols\fR(5). La diff\('erence majeure r\('eside dans le fait
que les noms de symboles et les \('etiquettes sont \('ecrits dans leur forme
d'origine au lieu d'\(^etre interpr\('et\('es, avec r\('eduction des \('etiquettes en mode
de compatibilit\('e. De plus, certains symboles peuvent \(^etre omis lors de
l'\('ecriture d'un fichier \fBdeb-symbols\fR(5) standard (selon les r\(`egles de
traitement des \('etiquettes) alors que tous les symboles sont \('ecrits lors de
la cr\('eation d'un mod\(`ele de fichier de symboles.
.IP "\fB\-c\fR\fI[0\-4]\fR" 4
.IX Item "-c[0-4]"
D\('efinit les contr\(^oles \(`a effectuer lors de la comparaison du fichier de
symboles cr\('e\('e en utilisant le fichier de mod\(`ele comme point de d\('epart. Le
niveau par d\('efaut est 1. Plus le niveau est augment\('e, plus le nombre de
contr\(^oles effectu\('es est important. Chaque niveau de contr\(^ole comporte les
contr\(^oles effectu\('es pour les niveaux inf\('erieurs. Le niveau 0 n'\('echoue
jamais. Le niveau 1 \('echoue si certains symboles ont disparu. Le niveau 2
\('echoue si de nouveaux symboles ont \('et\('e ajout\('es. Le niveau 3 \('echoue si
certaines biblioth\(`eques ont disparu. Le niveau 4 \('echoue si des biblioth\(`eques
ont \('et\('e ajout\('ees.
.Sp
Cette valeur peut \(^etre remplac\('ee par la valeur de la variable
d'environnement \fB\s-1DPKG_GENSYMBOLS_CHECK_LEVEL\s0\fR.
.IP "\fB\-q\fR" 4
.IX Item "-q"
Fonctionne en mode silencieux et ne cr\('ee jamais de fichier de diff\('erences
entre le fichier de symboles cr\('e\('e et le fichier mod\(`ele utilis\('e comme point
de d\('epart. N'affiche \('egalement aucun avertissement \(`a propos de biblioth\(`eques
nouvelles ou disparues ou de symboles nouveaux ou disparus. Cette option ne
d\('esactive que l'affichage informatif, mais pas les contr\(^oles eux\-m\(^emes (voir
l'option \fB\-c\fR).
.IP "\fB\-a\fR\fIarch\fR" 4
.IX Item "-aarch"
D\('efinit \fIarch\fR comme architecture lors du traitement des fichiers de
symboles. Cette option permet de cr\('eer un fichier de symboles ou un fichier
de diff\('erences pour n'importe quelle architecture, \(`a condition que les
fichiers binaires correspondants soient d\('ej\(`a disponibles.
.IP "\fB\-d\fR" 4
.IX Item "-d"
Active le mode bavard. De nombreux messages sont affich\('es pour expliquer ce
que \fBdpkg-gensymbols\fR fait.
.IP "\fB\-V\fR" 4
.IX Item "-V"
Active le mode bavard. Le fichier de symboles cr\('e\('e contiendra les symboles
d\('epr\('eci\('es sous forme de commentaires. De plus, en mode mod\(`ele, les motifs de
symboles seront suivis de commentaires affichant les symboles r\('eels qui
correspondent au motif.
.IP "\fB\-?\fR, \fB\-\-help\fR" 4
.IX Item "-?, --help"
Affiche un message d'aide puis quitte.
.IP "\fB\-\-version\fR" 4
.IX Item "--version"
Affiche le num\('ero de version puis quitte.
.SH "ENVIRONNEMENT"
.IX Header "ENVIRONNEMENT"
.IP "\fB\s-1DPKG_GENSYMBOLS_CHECK_LEVEL\s0\fR" 4
.IX Item "DPKG_GENSYMBOLS_CHECK_LEVEL"
Remplace le niveau de v\('erification de commande, m\(^eme si l'argument en ligne
de commande \fB\-c\fR a \('et\('e donn\('e (notez que cela va \(`a l'encontre de la
convention g\('en\('erale qui veut que les arguments en ligne de commande ont la
pr\('es\('eance sur les variables d'environnement).
.IP "\fB\s-1DPKG_COLORS\s0\fR" 4
.IX Item "DPKG_COLORS"
D\('efinit le mode de couleur (depuis dpkg 1.18.5). Les valeurs actuellement
accept\('ees sont \fBauto\fR (par d\('efaut), \fBalways\fR et \fBnever\fR.
.IP "\fB\s-1DPKG_NLS\s0\fR" 4
.IX Item "DPKG_NLS"
Si cette variable est d\('efinie, elle sera utilis\('ee pour d\('ecider l'activation
de la prise en charge des langues (\s-1NLS\s0 \(en Native Language Support), connu
aussi comme la gestion de l'internationalisation (ou i18n) (depuis
dpkg 1.19.0). Les valeurs permises sont : \fB0\fR et \fB1\fR (par d\('efaut).
.SH "VOIR AUSSI"
.IX Header "VOIR AUSSI"
\&\fBhttps://people.redhat.com/drepper/symbol\-versioning\fR
.PP
\&\fBhttps://people.redhat.com/drepper/goodpractice.pdf\fR
.PP
\&\fBhttps://people.redhat.com/drepper/dsohowto.pdf\fR
.PP
\&\fBdeb-src-symbol\fR(5), \fBdeb-symbols\fR(5), \fBdpkg-shlibdeps\fR(1).
.SH "TRADUCTION"
.IX Header "TRADUCTION"
Ariel \s-1VARDI\s0 <ariel.vardi@freesbee.fr>, 2002.
Philippe Batailler, 2006.
Nicolas Fran\(,cois, 2006.
Veuillez signaler toute erreur \(`a <debian\-l10n\-french@lists.debian.org>.
